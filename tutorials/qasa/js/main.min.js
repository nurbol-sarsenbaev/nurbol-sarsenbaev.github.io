var data=[{id:1,title:"Спальни",catalogs:[{id:1,title:"Зеркала",imageCount:6},{id:2,title:"Комоды",imageCount:11},{id:3,title:"Кровати двуспальные",imageCount:11},{id:4,title:"Кровати односпальные",imageCount:1},{id:5,title:"Прикроватные тумбочки",imageCount:12},{id:6,title:"Пуфики",imageCount:5},{id:7,title:"Шкафы",imageCount:5}]},{id:2,title:"Прихожие",catalogs:[{id:1,title:"Вешалки",imageCount:4},{id:2,title:"Шкафы",imageCount:2}]},{id:3,title:"Офисная мебель",catalogs:[{id:1,title:"Столы",imageCount:4}]},{id:4,title:"Кухни",catalogs:[{id:1,title:"Обеденные столы",imageCount:13},{id:2,title:"Стулья",imageCount:5},{id:3,title:"Табуреты",imageCount:5}]},{id:5,title:"Детская мебель",catalogs:[{id:1,title:"Стулья",imageCount:3}]},{id:6,title:"Двери",catalogs:[{id:1,title:"Двери",imageCount:4}]},{id:7,title:"Гостиные",catalogs:[{id:1,title:"Журнальные столики",imageCount:1},{id:2,title:"Комоды для гостиной",imageCount:1},{id:3,title:"Мягкая мебель",imageCount:8},{id:4,title:"Стенки",imageCount:1},{id:5,title:"ТВ-Тумбы",imageCount:4},{id:6,title:"Шкафы для гостиной",imageCount:4}]}];function validateEmail(t){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}function checkInput(t){return!(!t.val()||"email"==t.attr("type")&&!validateEmail(t.val()))&&(t.removeClass("error"),!0)}function parseGET(t){var e=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"];if(t&&""!=t||(t=decodeURI(document.location.search)),t.indexOf("?")<0)return Array();var i={},a=[],o=[];-1!=(t=(t=t.split("?"))[1]).indexOf("#")&&(t=t.substr(0,t.indexOf("#"))),t.indexOf("&")>-1?a=t.split("&"):a[0]=t;for(var l=0;l<a.length;l++)for(var s=0;s<e.length;s++)a[l].indexOf(e[s]+"=")>-1&&a[l].indexOf("=")>-1&&(i[(o=a[l].split("="))[0]]=o[1]);return i}$(function(){var t=$(window),e=$(".page-top"),i=$("html, body"),a=$(".header"),o=$(".main-menu"),l=($(".preloader"),$("#thanks")),s=parseGET();s&&Object.keys(s).length>0?window.sessionStorage.setItem("utms",JSON.stringify(s)):s=JSON.parse(window.sessionStorage.getItem("utms")||"[]"),t.scroll(function(){n()});var n=function(){t.scrollTop()>t.height()?e.addClass("active"):e.removeClass("active"),t.scrollTop()>0?a.addClass("inverse"):a.removeClass("inverse");var i=t.scrollTop()+83;o.find(".link").each(function(){var t=$(this),e=t.attr("href"),a=$(e),o=a.offset().top;o<=i&&o+a.height()>=i?t.addClass("active"):t.removeClass("active")})};function r(t){t.fadeOut(500);var e=t.find("form");e.length>0&&e[0].reset();var i=e.find(".phone");i.length>0&&i.removeClass("error")}n(),e.click(function(){i.stop().animate({scrollTop:0},"slow","swing")}),$(".hamburger").click(function(){return $this=$(this),$this.hasClass("is-active")?($this.removeClass("is-active"),o.slideUp("700")):($this.addClass("is-active"),o.slideDown("700")),!1}),$(".main-menu .link").click(function(t){t.preventDefault();var e=$(this).attr("href");if(e.length>0){var a=$(e).offset().top;console.log(a),i.stop().animate({scrollTop:a},"slow","swing")}}),$(".modal-open").click(function(){var t=$(this).data("id");return $("#"+t).fadeIn(500),!1}),$(".modal").click(function(){r($(this))}),$(".modal-content").click(function(t){t.stopPropagation()}),$(".modal-close").click(function(){r($(this).closest(".modal"))}),$(".form-submit").click(function(t){t.preventDefault();var e=$(this).closest("form"),i=e.find(":required"),a=!0;i.each(function(){$elem=$(this),$elem.val()&&checkInput($elem)||($elem.addClass("error"),a=!1)});var o=e.serialize();if(Object.keys(s).length>0)for(var n in s)o+="&"+n+"="+s[n];else o+="&utm=Прямой переход";a&&($.ajax({type:"POST",url:"/mail.php",data:o}).done(function(){}),$(this).closest(".modal").fadeOut(500),i.removeClass("error"),e[0].reset(),l.fadeIn(500))}),$(".phone").mask("+7 (999) 999 99 99",{completed:function(){$(this).removeClass("error")}});var c="",d=1,u=1,m=[],g=$(".carousel-catalog");function v(){catelogs=[];for(var t=0;t<data.length;t++)if(data[t].id===d){c=data[t].title,m=data[t].catalogs;break}var e="";for(t=0;t<m.length;t++)e+='<div class="catalog '+(u===m[t].id?"active":"")+'" data-id="'+m[t].id+'">'+m[t].title+"</div>";$(".catalogs").html(e),$(".catalog").click(function(){u=$(this).data("id"),f()})}function f(){g.data("owl.carousel").destroy();for(var t="",e=0;e<m.length;e++)if(m[e].id===u){for(var i=1;i<=m[e].imageCount;i++){var a="./img/catalogs/"+c+"/"+m[e].title+"/mini/"+i+".jpg";t+='<div class="carousel-catalog-item"><div class="carousel-catalog-image"><a href="'+("./img/catalogs/"+c+"/"+m[e].title+"/"+i+".jpg")+'" data-fancybox="catalogGallery"><img src="'+a+'" alt=""></a></div><button class="button">Хочутакже</button></div>'}break}g.html(t),g.owlCarousel({nav:!0,dots:!1,loop:!0,smartSpeed:500,autoplay:!0,autoplayTimeout:1e4,margin:30,navText:["",""],responsive:{0:{items:1},768:{items:2},992:{items:3}}})}g.owlCarousel(),$(".category").click(function(){$(".category").removeClass("active"),$(this).addClass("active"),d=$(this).data("id"),u=1,v(),f()}),v(),f(),$("input:required, textarea:required").keyup(function(){var t=$(this);t.hasClass("phone")||checkInput(t)}),$(".carousel-reviews").owlCarousel({items:1,nav:!1,dots:!0,loop:!0,smartSpeed:500,autoplay:!0,autoplayTimeout:1e4,margin:60,navText:["",""]}),$(".carousel-izdelie").owlCarousel({nav:!0,dots:!1,loop:!0,smartSpeed:500,margin:30,navText:["",""],onChanged:function(t){$(this)[0].$element.find(".izdelie-image").equalHeights()},responsive:{0:{items:1},768:{items:2},992:{items:3}}})});